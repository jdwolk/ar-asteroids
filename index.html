<html>
<head>
<script src="https://aframe.io/releases/0.7.1/aframe.min.js"></script>
<script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
</head>
<body style='margin : 0px; overflow: hidden;'>
  <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false;'>
    <a-assets>
      <a-asset-item id="asteroid1-asset" src="./asteroid1/scene.gltf"></a-asset-item>
      <a-asset-item id="asteroid2-asset" src="./asteroid2/scene.gltf"></a-asset-item>
    </a-assets>

    <a-marker type='pattern' url='./asteroid1.patt'>
      <a-entity id="asteroid1" gltf-model="#asteroid1-asset" position="0 0 -2" scale="1 1 1" ></a-entity>
      <a-cylinder color="crimson" height="2" radius="0.01" position="0 0 -2.5" rotation="0 45 -45"></a-cylinder>
      <a-cylinder color="crimson" height="1.75" radius="0.01" position="01.37 0.68 -3" rotation="0 0 90"></a-cylinder>
      <a-entity text="value:4 VESTA; color:#FFFFFF; shader: msdf; font:https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/orbitron/Orbitron-Bold.json;" position="4.5 0.75 -3.4" rotation="-90 0 0" scale="8 8 8"></a-entity>
      <a-entity text="value:V-TYPE  |  525.4km; color:#FFFFFF; shader: msdf; font:https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/orbitron/Orbitron-Bold.json;" position="3 0.75 -3.1" rotation="-90 0 0" scale="5 5 5"></a-entity>
    </a-marker>

    <a-marker type='pattern' url='./asteroid2.patt'>
      <a-entity id="asteroid2" gltf-model="#asteroid2-asset" position="0 0 -2" scale="1 1 1" ></a-entity>
      <a-cylinder color="crimson" height="2" radius="0.01" position="0 0 -2.5" rotation="0 45 -45"></a-cylinder>
      <a-cylinder color="crimson" height="1.75" radius="0.01" position="01.37 0.68 -3" rotation="0 0 90"></a-cylinder>
      <a-entity text="value:2 PALLAS; color:#FFFFFF; shader: msdf; font:https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/orbitron/Orbitron-Bold.json;" position="4.5 0.75 -3.4" rotation="-90 0 0" scale="8 8 8"></a-entity>
      <a-entity text="value:B-TYPE  |  550km; color:#FFFFFF; shader: msdf; font:https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/orbitron/Orbitron-Bold.json;" position="3 0.75 -3.1" rotation="-90 0 0" scale="5 5 5"></a-entity>
    </a-marker>
  </a-scene>

  <script>
    const asteroid1El = document.getElementById("asteroid1")
    let asteroid1 = { x: 0, y: 0, z: 0 }

    const asteroid2El = document.getElementById("asteroid2")
    let asteroid2 = { x: 0, y: 0, z: 0 }

    const rotateAsteroid = (asteroidEl, asteroid, rotate) => {
      const newX = (asteroid.x + rotate.x) % 360
      const newY = (asteroid.y + rotate.y) % 360
      const newZ = (asteroid.z + rotate.z) % 360
      asteroid.x = newX
      asteroid.y = newY
      asteroid.z = newZ
      asteroidEl.setAttribute('rotation', asteroid)
    }

    setInterval(() => {
      rotateAsteroid(asteroid1El, asteroid1, { x: 1, y: 3, z: 2 })
      rotateAsteroid(asteroid2El, asteroid2, { x: 2, y: 1, z: 3 })
    }, 100);
  </script>
</body>
</html>
